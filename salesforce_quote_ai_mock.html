
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quote Detail - PLM AI Assist (Mock Salesforce UI)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f5f9;
      color: #1f2933;
    }
    .app-shell {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 220px;
      background: #001639;
      color: #e5eaf3;
      padding: 16px 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .sidebar h1 {
      font-size: 16px;
      margin: 0 0 4px 0;
    }
    .sidebar small {
      opacity: 0.8;
    }
    .nav-section-title {
      margin-top: 16px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.7;
    }
    .nav-item {
      margin-top: 6px;
      padding: 6px 8px;
      border-radius: 4px;
      font-size: 13px;
      cursor: pointer;
    }
    .nav-item:hover {
      background: rgba(255,255,255,0.08);
    }
    .nav-item.active {
      background: #0b5cab;
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .topbar {
      background: #ffffff;
      border-bottom: 1px solid #d8dde6;
      padding: 8px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .breadcrumbs {
      font-size: 11px;
      color: #7b8ba1;
    }

    .breadcrumbs span + span::before {
      content: "›";
      margin: 0 4px;
      color: #9aa5b4;
    }

    .header-main {
      padding: 12px 20px 8px;
      border-bottom: 1px solid #d8dde6;
      background: #fdfdff;
    }
    .header-row1 {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .title-block h2 {
      margin: 0;
      font-size: 20px;
    }
    .title-block .meta {
      font-size: 12px;
      color: #6b7789;
      margin-top: 2px;
    }
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .chip {
      font-size: 11px;
      border-radius: 100px;
      padding: 4px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid transparent;
    }
    .chip-status {
      background: #e3f3ff;
      color: #014486;
      border-color: #b3ddff;
    }
    .chip-risk-low { background: #e6f4ea; color: #1e7a33; border-color: #c2e3c9; }
    .chip-risk-med { background: #fff4e5; color: #8a4b14; border-color: #ffd9a6; }
    .chip-risk-high{ background: #fdecea; color: #a61b1b; border-color: #f5b5b2; }
    .chip-ai { background: #efe9ff; color: #5b3fd3; border-color: #d3c7ff; }

    .probability {
      font-size: 13px;
      color: #102a43;
    }
    .probability strong { font-size: 16px; }

    .view-toggle {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid #d8dde6;
      overflow: hidden;
    }
    .view-toggle button {
      border: none;
      background: transparent;
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
    }
    .view-toggle button.active {
      background: #0b5cab;
      color: white;
    }

    .content {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.3fr);
      gap: 12px;
      padding: 12px 16px 20px;
      overflow: auto;
    }
    .column {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      background: #ffffff;
      border-radius: 6px;
      border: 1px solid #d8dde6;
      padding: 10px 12px;
      box-shadow: 0 1px 2px rgba(15, 23, 42, 0.04);
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }
    .card-title {
      font-size: 13px;
      font-weight: 600;
    }
    .card-subtitle {
      font-size: 11px;
      color: #7b8ba1;
    }
    .tag {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #7b8ba1;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 4px;
    }
    .summary-tile {
      border-radius: 6px;
      border: 1px solid #e1e7f0;
      padding: 8px;
      background: #f9fafc;
      font-size: 11px;
    }
    .summary-label {
      color: #7b8ba1;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .summary-value {
      margin-top: 2px;
      font-weight: 600;
      font-size: 12px;
    }

    .ai-reasoning {
      font-size: 11px;
      color: #4a5568;
      background: #f5f3ff;
      border-radius: 6px;
      padding: 8px;
      margin-top: 8px;
      border: 1px dashed #c7bfff;
    }
    .ai-reasoning-toggle {
      font-size: 11px;
      color: #5b3fd3;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid #e1e7f0;
      background: #f9fafc;
    }
    .pill.red { border-color: #f5b5b2; background: #fdecea; color: #9b1c1c; }

    .section-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
    }
    th, td {
      padding: 6px 4px;
      border-bottom: 1px solid #e1e7f0;
      text-align: left;
    }
    th {
      background: #f4f6fb;
      font-weight: 600;
      font-size: 11px;
      color: #4a5568;
    }
    .flag {
      font-size: 10px;
      color: #b43403;
      background: #fff4e5;
      padding: 2px 6px;
      border-radius: 999px;
    }

    .timeline {
      border-left: 2px solid #e1e7f0;
      margin-top: 4px;
      padding-left: 10px;
      font-size: 11px;
      max-height: 280px;
      overflow-y: auto;
    }
    .timeline-item {
      position: relative;
      margin-bottom: 10px;
    }
    .timeline-item::before {
      content: "";
      position: absolute;
      left: -11px;
      top: 2px;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #0b5cab;
    }
    .timeline-title {
      font-weight: 600;
      font-size: 11px;
    }
    .timeline-meta {
      color: #7b8ba1;
      font-size: 10px;
      margin-bottom: 2px;
    }

    .badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #e3f3ff;
      color: #014486;
    }

    .btn-bar {
      display: flex;
      gap: 6px;
    }
    .btn {
      font-size: 11px;
      border-radius: 4px;
      border: 1px solid #d8dde6;
      padding: 4px 8px;
      background: white;
      cursor: pointer;
    }
    .btn.primary {
      background: #0b5cab;
      color: white;
      border-color: #0b5cab;
    }
    .btn.primary:hover { background: #084282; }
    .btn:hover { background: #f3f5f9; }

    .pill-tab-row {
      display: flex;
      gap: 6px;
      margin-bottom: 4px;
      flex-wrap: wrap;
    }
    .pill-tab {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #d8dde6;
      background: #f9fafc;
      cursor: pointer;
    }
    .pill-tab.active {
      background: #0b5cab;
      color: white;
      border-color: #0b5cab;
    }

    .hidden { display: none !important; }

    @media (max-width: 960px) {
      .app-shell { flex-direction: column; }
      .sidebar { display: none; }
      .content { grid-template-columns: minmax(0, 1fr); }
    }
  </style>
</head>
<body>
<div class="app-shell">
  <aside class="sidebar">
    <div>
      <h1>ACME Corp</h1>
      <small>Sales Cloud · Prototype</small>
    </div>
    <div class="nav-section-title">Navigation</div>
    <div class="nav-item">Home</div>
    <div class="nav-item">Opportunities</div>
    <div class="nav-item active">Quotes</div>
    <div class="nav-item">Accounts</div>
    <div class="nav-section-title">AI Assist</div>
    <div class="nav-item">Quote Insights</div>
    <div class="nav-item">PLM Queue</div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div class="breadcrumbs">
        <span>Quotes</span>
        <span>Q-023984</span>
      </div>
      <div class="btn-bar">
        <button class="btn">Clone</button>
        <button class="btn">Edit</button>
        <button class="btn primary">Submit for Customer</button>
      </div>
    </div>

    <div class="header-main">
      <div class="header-row1">
        <div class="title-block">
          <h2>Quote Q-023984 · EMEA PLM Approval</h2>
          <div class="meta">Customer: Globex Manufacturing · Owner: Jane Miller · Created: Jun 12, 2025</div>
        </div>
        <div class="chips">
          <span class="chip chip-status">Status: Waiting for PLM</span>
          <span class="chip chip-risk-med" id="riskChip">Risk: Medium</span>
          <span class="chip chip-ai">AI Assist Enabled</span>
        </div>
      </div>
      <div class="header-row1" style="margin-top: 6px;">
        <div class="probability">
          Approval likelihood: <strong>88%</strong> · based on 126 similar quotes
        </div>
        <div style="display:flex; align-items:center; gap:10px;">
          <span style="font-size:11px; color:#7b8ba1;">View as:</span>
          <div class="view-toggle">
            <button id="viewSales" class="active">Sales</button>
            <button id="viewPLM">PLM</button>
          </div>
        </div>
      </div>
    </div>

    <div class="content">
      <!-- LEFT COLUMN -->
      <section class="column">
        <!-- Summary tiles -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Quote Snapshot</div>
              <div class="card-subtitle">Key metrics used by the decision engine</div>
            </div>
          </div>
          <div class="summary-grid">
            <div class="summary-tile">
              <div class="summary-label">Total Amount</div>
              <div class="summary-value">€248,900</div>
              <div style="font-size:10px; color:#7b8ba1;">3 line items</div>
            </div>
            <div class="summary-tile">
              <div class="summary-label">Overall Margin</div>
              <div class="summary-value">19.4%</div>
              <div style="font-size:10px; color:#7b8ba1;">Corridor: 17–22%</div>
            </div>
            <div class="summary-tile">
              <div class="summary-label">Product Risk</div>
              <div class="summary-value">New variant</div>
              <div style="font-size:10px; color:#b43403;">Limited history</div>
            </div>
            <div class="summary-tile">
              <div class="summary-label">Data Completeness</div>
              <div class="summary-value">Auto-filled</div>
              <div style="font-size:10px; color:#7b8ba1;">Oracle (Version 2) + Databricks</div>
            </div>
          </div>

          <div>
            <span class="ai-reasoning-toggle" id="toggleReasoning">
              ▾ Why did the AI choose PLM review?
            </span>
            <div class="ai-reasoning hidden" id="reasoningBody">
              This quote is <strong>similar to 126 approved deals</strong> in EMEA, with margins between 18–21%.
              It was routed to PLM because the main item is a <strong>new product variant</strong> and one
              line is priced <strong>3.5% below the standard corridor</strong>. The engine recommends
              approval with a minimum annual volume commitment.
            </div>
          </div>
        </div>

        <!-- Line items -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Products & Pricing</div>
              <div class="card-subtitle">Inline flags show where AI detected issues</div>
            </div>
          </div>
          <table>
            <thead>
              <tr>
                <th>Product</th>
                <th>Region</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Margin</th>
                <th>Flags</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>FLEX-CTRL-200</td>
                <td>EMEA</td>
                <td>1,200</td>
                <td>€82.00</td>
                <td>19.1%</td>
                <td><span class="flag">New product</span></td>
              </tr>
              <tr>
                <td>FLEX-SENSOR-10</td>
                <td>EMEA</td>
                <td>800</td>
                <td>€18.20</td>
                <td>16.5%</td>
                <td>
                  <span class="flag">Price below corridor</span>
                </td>
              </tr>
              <tr>
                <td>FLEX-HUB-CORE</td>
                <td>EMEA</td>
                <td>150</td>
                <td>€410.00</td>
                <td>21.8%</td>
                <td>—</td>
              </tr>
            </tbody>
          </table>
          <div style="margin-top:6px; font-size:11px; color:#7b8ba1;">
            Corridor for FLEX-SENSOR-10 in EMEA: €18.80–€20.40 · AI suggests increasing price to at least €18.80
          </div>
        </div>

        <!-- Agent cards row -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">AI Agents · Status</div>
          </div>
          <div class="pill-tab-row">
            <div class="pill-tab active" data-agent-tab="A">Agent A · Pre-screen</div>
            <div class="pill-tab" data-agent-tab="D">Agent D · Data Completion</div>
            <div class="pill-tab" data-agent-tab="B">Agent B · Decision</div>
            <div class="pill-tab" data-agent-tab="C">Agent C · PLM Orchestration</div>
          </div>

          <div id="agentA" class="agent-panel">
            <div class="section-title">Agent A · Quote Pre-Screening</div>
            <ul style="margin:4px 0 0; padding-left:18px; font-size:11px;">
              <li>Normalized region to <strong>EMEA</strong> and customer name to master record.</li>
              <li>Validated mandatory fields: price, MOQ, volume, product code, requested date.</li>
              <li>Computed approval probability (<strong>88%</strong>) from Databricks ML model.</li>
              <li>Detected 2 red flags: new product &amp; price below corridor.</li>
            </ul>
          </div>

          <div id="agentD" class="agent-panel hidden">
            <div class="section-title">Agent D · Data Completion</div>
            <ul style="margin:4px 0 0; padding-left:18px; font-size:11px;">
              <li>Fetched latest cost and MOQ from <strong>Oracle ERP</strong> for all items. (Version 2)</li>
              <li>Pulled typical order volumes from <strong>Databricks</strong> for similar EMEA customers.</li>
              <li>LLM suggested default lead time of <strong>6 weeks</strong>; confirmed by product manager.</li>
              <li>No open data gaps &mdash; salesperson not notified.</li>
            </ul>
          </div>

          <div id="agentB" class="agent-panel hidden">
            <div class="section-title">Agent B · Auto-Decision Engine</div>
            <ul style="margin:4px 0 0; padding-left:18px; font-size:11px;">
              <li>Categorised quote as <strong>Medium risk</strong> due to new product + minor corridor breach.</li>
              <li>LLM knowledge base confirmed MOQ and margin are within policy for EMEA.</li>
              <li>Prepared PLM package recommending <strong>“Approve with annual volume commitment ≥ 1,000 units”</strong>.</li>
            </ul>
          </div>

          <div id="agentC" class="agent-panel hidden">
            <div class="section-title">Agent C · PLM Orchestration</div>
            <ul style="margin:4px 0 0; padding-left:18px; font-size:11px;">
              <li>Created PLM approval record and assigned to <strong>Anna Kowalski (EMEA PLM)</strong>.</li>
              <li>Set SLA to <strong>24 hours</strong>: reminder in 4 hours, escalation in 20 hours.</li>
              <li>Shared 1-page summary plus table of 5 similar historical quotes.</li>
              <li>Waiting on PLM decision.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- RIGHT COLUMN -->
      <section class="column">
        <!-- PLM Panel / Sales panel -->
        <div class="card" id="plmPanel" style="display:none;">
          <div class="card-header">
            <div>
              <div class="card-title">PLM Package & Decision</div>
              <div class="card-subtitle">Prepared automatically by Agent B</div>
            </div>
          </div>
          <div class="section-title">Recommended Action</div>
          <div style="font-size:11px; margin-bottom:6px;">
            <strong>Approve with conditions</strong> · Lock annual volume commitment of
            <strong>≥ 1,000 pcs</strong> for FLEX-CTRL-200 and increase FLEX-SENSOR-10 price to at least corridor minimum.
          </div>
          <div class="section-title">Key Risks & Mitigations</div>
          <ul style="margin:4px 0 8px; padding-left:18px; font-size:11px;">
            <li>New variant with limited field history → Mitigate via controlled pilot with top 3 customers.</li>
            <li>Price 3.5% below corridor on FLEX-SENSOR-10 → Require corridor minimum on renewal or uplift clause.</li>
          </ul>
          <div class="section-title">Historical Comparison (Top 3)</div>
          <table>
            <thead>
              <tr>
                <th>Quote</th>
                <th>Customer</th>
                <th>Margin</th>
                <th>Outcome</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Q-019874</td>
                <td>Globex EMEA</td>
                <td>19.0%</td>
                <td>Approved</td>
              </tr>
              <tr>
                <td>Q-021551</td>
                <td>Contoso Ltd.</td>
                <td>18.4%</td>
                <td>Approved</td>
              </tr>
              <tr>
                <td>Q-022932</td>
                <td>Innotech GmbH</td>
                <td>17.9%</td>
                <td>Approved</td>
              </tr>
            </tbody>
          </table>
          <div style="margin-top:8px;" class="btn-bar">
            <button class="btn primary">Approve with Conditions</button>
            <button class="btn">Approve as Is</button>
            <button class="btn">Reject</button>
          </div>
        </div>

        <div class="card" id="salesPanel">
          <div class="card-header">
            <div>
              <div class="card-title">What should I do next?</div>
              <div class="card-subtitle">Sales guidance based on the AI decision</div>
            </div>
          </div>
          <div style="font-size:11px;">
            <p>
              The quote is currently <strong>waiting for PLM approval</strong>. You do not need to modify pricing,
              but you can proactively align with the customer on a minimum annual volume commitment of
              <strong>1,000 pcs</strong> for FLEX-CTRL-200.
            </p>
            <p>
              If the customer insists on current pricing for FLEX-SENSOR-10, mention that pricing is
              <strong>slightly below our standard corridor</strong> and may be tied to the volume commitment.
            </p>
          </div>
          <div class="section-title">Suggested talking points</div>
          <ul style="margin:4px 0 0; padding-left:18px; font-size:11px;">
            <li>“This pricing is based on a long-term partnership structure with volume commitments.”</li>
            <li>“We can keep this price level if we agree on at least 1,000 controllers per year.”</li>
            <li>“Future renewals may include a corridor-based uplift, depending on market conditions.”</li>
          </ul>
        </div>

        <!-- Timeline -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Agent Timeline</div>
              <div class="card-subtitle">Everything that happened on this quote</div>
            </div>
          </div>
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-meta">10:02 · Agent A</div>
              <div class="timeline-title">Quote pre-screened</div>
              <div>Fields normalized; 2 red flags detected; approval probability computed at 88%.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-meta">10:03 · Agent D</div>
              <div class="timeline-title">Data completed</div>
              <div>Cost & MOQ and typical volumes from Databricks; lead time inferred and confirmed.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-meta">10:04 · Agent B</div>
              <div class="timeline-title">Decision prepared</div>
              <div>Classified as Medium risk; generated PLM package with recommendation to approve with conditions.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-meta">10:05 · Agent C</div>
              <div class="timeline-title">PLM request sent</div>
              <div>Assigned to Anna Kowalski (EMEA PLM); SLA 24h; reminder scheduled at 14:05.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-meta">10:06 · System</div>
              <div class="timeline-title">Status updated</div>
              <div>Quote moved to “Waiting for PLM”; customer-facing submission blocked until decision.</div>
            </div>
          </div>
        </div>

        <!-- Red flags & data health -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">Red Flags & Data Health</div>
          </div>
          <div class="section-title">Red flags</div>
          <div class="pill-list">
            <span class="pill red">New product variant</span>
            <span class="pill red">Price below corridor (FLEX-SENSOR-10)</span>
          </div>
          <div class="section-title" style="margin-top:8px;">Data sources</div>
          <div class="pill-list">
            <span class="pill">Oracle ERP · cost, MOQ, lead time (POC - only from Databricks)</span>
            <span class="pill">Databricks · history & ML model</span>
            <span class="pill">LLM · normalization & guidance</span>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>

<script>
  // Toggle AI reasoning
  const toggleReasoning = document.getElementById('toggleReasoning');
  const reasoningBody = document.getElementById('reasoningBody');
  toggleReasoning.addEventListener('click', () => {
    reasoningBody.classList.toggle('hidden');
    toggleReasoning.textContent = reasoningBody.classList.contains('hidden')
      ? '▾ Why did the AI choose PLM review?'
      : '▴ Why did the AI choose PLM review?';
  });

  // Agent tabs
  const tabs = document.querySelectorAll('[data-agent-tab]');
  const panels = {
    A: document.getElementById('agentA'),
    B: document.getElementById('agentB'),
    C: document.getElementById('agentC'),
    D: document.getElementById('agentD')
  };
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      const key = tab.getAttribute('data-agent-tab');
      Object.keys(panels).forEach(k => panels[k].classList.toggle('hidden', k !== key));
    });
  });

  // View toggle (Sales vs PLM)
  const viewSalesBtn = document.getElementById('viewSales');
  const viewPLMBtn = document.getElementById('viewPLM');
  const salesPanel = document.getElementById('salesPanel');
  const plmPanel = document.getElementById('plmPanel');
  const riskChip = document.getElementById('riskChip');

  function setView(view) {
    if (view === 'sales') {
      viewSalesBtn.classList.add('active');
      viewPLMBtn.classList.remove('active');
      salesPanel.style.display = '';
      plmPanel.style.display = 'none';
    } else {
      viewPLMBtn.classList.add('active');
      viewSalesBtn.classList.remove('active');
      salesPanel.style.display = 'none';
      plmPanel.style.display = '';
    }
  }

  viewSalesBtn.addEventListener('click', () => setView('sales'));
  viewPLMBtn.addEventListener('click', () => setView('plm'));

  setView('sales');
</script>
</body>
</html>
